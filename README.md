### 1. ТЕХНОЛОГИЧЕСКИЙ СТЕК
1.1. Серверная платформа: CMS WordPress версии 6.4 и выше. Разработка кастомной темы с нуля без использования готовых конструкторов.
1.2. Язык программирования (сервер): PHP версии 8.2 и выше. Использование строгой типизации и современных возможностей языка.
1.3. Веб-сервер: Связка NGINX + PHP-FPM для высокой производительности и эффективной обработки статического контента.
1.4. Среда разработки: Docker-контейнеризация для обеспечения идентичного окружения на всех этапах (разработка, тестирование, продакшн).
1.5. Ключевые плагины:
1.5.1. WooCommerce 8.0+: Полнофункциональная система управления каталогом, корзиной, заказами и клиентами для B2C-сегмента.
1.5.2. Advanced Custom Fields PRO: Создание и управление сложными метаполями для товаров, страниц и записей с гибким интерфейсом в админке.
1.5.3. Wordfence Security: Комплексный брандмауэр, сканер уязвимостей и система защиты от атак (XSS, SQL-инъекции, брутфорс).
1.5.4. WP Rocket: Плагин для комплексного кэширования (страниц, БД, объектов), минификации CSS/JS файлов и ленивой загрузки изображений (Lazy Load).
1.5.5. Rank Math SEO: Инструмент для базовой SEO-оптимизации: редактирование мета-тегов, генерация XML-карты сайта, настройка Open Graph разметки.
1.6. Клиентская часть:
1.6.1. HTML5: Семантическая, валидная разметка с использованием микроформатов Schema.org (Product, Organization, BreadcrumbList).
1.6.2. CSS3: Препроцессор SCSS (Sass) для модульной структуры стилей. Применение методологии именования БЭМ.
1.6.3. JavaScript: Нативный ES6+ с транспиляцией через Babel для совместимости. Использование легковесного фреймворка Alpine.js для реактивных интерфейсов (модальные окна, табы, динамические фильтры).
1.6.4. Сборка: Сборщик Vite для скоростной разработки, горячей перезагрузки (HMR) и финальной оптимизации бандла.
1.6.5. Сторонние библиотеки:
Swiper.js: Для реализации адаптивных и отзывчивых слайдеров в геро-секции и галереях товаров.
Just Validate: Для клиентской валидации всех форм на сайте с кастомными сообщениями об ошибках.
Choices.js: Для замены нативных элементов на кастомизированные, стилизуемые выпадающие списки в фильтрах каталога.
1.6.6. Типографика: Шрифты подключаются через Google Fonts API. Основные гарнитуры: Noto Serif (заголовки, акценты), Inter (основной текст, интерфейс).
2. СИСТЕМА БАЗЫ ДАННЫХ И ХРАНИЛИЩЕ
2.1. Система управления базами данных (СУБД): MySQL версии 8.0 или её форк MariaDB версии 10.5 и выше.
2.2. Движок хранения: InnoDB для поддержки транзакций, внешних ключей и повышения отказоустойчивости.
2.3. Безопасность БД:
2.3.1. Все SQL-запросы к базе данных выполняются исключительно через подготовленные выражения (Prepared Statements) для предотвращения инъекций.
2.3.2. Префикс таблиц БД по умолчанию (wp_) изменяется на кастомный (например, wel_).
2.4. Резервное копирование: Настраивается автоматический процесс резервного копирования.
2.4.1. Частота: Ежедневно — инкрементальные копии измененных данных, еженедельно — полный дамп базы данных и файловой структуры сайта.
2.4.2. Хранилище: Резервные копии шифруются и передаются на удаленное S3-совместимое объектное хранилище (например, Selectel Cloud Storage, Yandex Cloud Object Storage) с политикой хранения не менее 30 дней.
2.5. Медиафайлы:
2.5.1. Загружаемые изображения автоматически конвертируются в современный формат WebP с созданием JPEG-фоллбэка для старых браузеров.
2.5.2. Для статического контента (изображения, CSS, JS) предусмотрена интеграция с CDN (Content Delivery Network) для увеличения скорости загрузки в различных регионах. Исходные файлы остаются на основном сервере.
3. СПЕЦИФИКАЦИЯ ЦВЕТОВОЙ ПАЛИТРЫ И ТИПОГРАФИКИ
3.1. Основная палитра (HEX-коды):
Базовый белый (фон): #FFFFFF
Фоновый оттенок (секции): #F9F7F4
Основной текст: #2D2A24
Вторичный текст: #6C6559
Акцентный Primary (зеленый): #3A6B3F
Акцентный Secondary (терракотовый): #A35745
Акцентный Tertiary (золотистый): #C8A97E
Цвет успеха: #4A8B5B
Цвет ошибки: #C45656
3.2. Типографика:
Шрифт заголовков (H1-H4): Noto Serif. Вес: от 400 (Regular) до 700 (Bold).
Шрифт основного текста и интерфейса: Inter. Вес: 300 (Light) для второстепенного текста, 400 (Regular) для основного, 500 (Medium) для кнопок и навигации, 600 (SemiBold) для акцентов.
Базовая линия: font-size: 16px для , line-height: 1.6.
Масштабирование: Использование относительных единиц (rem, em) для обеспечения доступности и адаптивности.
Иерархия заголовков: Четко определенные размеры и отступы (margin) для каждого уровня заголовка (H1: 2.5rem, H2: 2rem, H3: 1.75rem, H4: 1.5rem).
4. АРХИТЕКТУРА АДМИНИСТРАТИВНОЙ ПАНЕЛИ (WORDPRESS BACKEND)
4.1. Кастомизация интерфейса:
4.1.1. Замена стандартного логотипа WordPress на логотип «Восточный Лист» на экране входа и в админ-панели.
4.1.2. Упрощение главного дашборда: удаление ненужных виджетов по умолчанию, добавление кастомных блоков со статистикой по заказам и B2B-заявкам.
4.2. Система ролей и прав:
Администратор (Administrator): Полный доступ ко всем функциям сайта и настройкам.
Редактор товаров (Shop Manager): Управление каталогом (товары, категории, теги), заказами WooCommerce, отзывами. Запрет на доступ к настройкам плагинов, темы и пользователям.
Автор контента (Author/Editor): Создание и публикация записей в блоге, управление собственными медиафайлами. Запрет на доступ к WooCommerce и настройкам.
4.3. Структура кастомных полей (ACF) для товара:
Группа полей "Основное": Цена (price: Number), Артикул (sku: Text), Флаг "В наличии" (in_stock: True/False), Вес упаковки (weight: Number).
Группа полей "Галерея": Поле типа "Галерея" (gallery: Gallery) с лимитом 10 изображений.
Группа полей "Происхождение": Селект "Провинция" (province: Select), текстовое поле "Уезд" (county: Text), селект "Сезон сбора" (harvest_season: Select), числовое поле "Год" (year: Number).
Группа полей "Характеристики": Повторяемое поле (specs: Repeater) с вложенными полями "Название" (name: Text) и "Значение" (value: Text).
Группа полей "Заваривание": Числовые поля "Температура воды (°C)" (temp: Number), "Время настаивания (сек)" (steep_time: Number), "Количество на порцию (г)" (amount: Number).
4.4. Управление заявками:
4.4.1. Создание кастомного типа записи "B2B-заявки" с полями, соответствующими форме на сайте (Название компании, Контактное лицо, Email, Телефон, Комментарий).
4.4.2. Добавление кастомных статусов для заявок: "Новая", "В обработке", "Отклонена", "Успешно". Вывод всех заявок в едином списке в админке с возможностью сортировки, фильтрации и экспорта в CSV.
5. ТРЕБОВАНИЯ К БЕЗОПАСНОСТИ
5.1. Защита на уровне приложения (WordPress):
5.1.1. Ограничение попыток входа: Блокировка IP-адреса после 5 неудачных попыток входа в админку на 30 минут (реализуется через Wordfence).
5.1.2. Скрытие информации: Отключение генерации и вывода версий WordPress и PHP в HTML-коде и HTTP-заголовках.
5.1.3. Защита служебных файлов: Настройка правил в .htaccess/nginx.conf для запрета прямого доступа к файлам wp-config.php, error_log и директориям wp-includes/, wp-content/plugins/.
5.1.4. Обновления: Обязательное обновление ядра WordPress, темы и всех плагинов до актуальных стабильных версий в течение 7 дней после их релиза.
5.2. Защита на уровне сервера и сети:
5.2.1. HTTPS: Принудительное перенаправление всех HTTP-запросов на HTTPS. Настройка современных протоколов шифрования (TLS 1.3).
5.2.2. Заголовки безопасности: Настройка HTTP-заголовков: Strict-Transport-Security (HSTS), X-Content-Type-Options: nosniff, X-Frame-Options: SAMEORIGIN, базовая Content-Security-Policy (CSP).
5.2.3. Защита от DDoS: Использование облачного DNS-сервиса с защитой (например, Cloudflare) для скрытия реального IP-адреса сервера и фильтрации трафика.
5.3. Защита данных:
5.3.1. Пароли пользователей хранятся только в виде хэшей, сгенерированных встроенными в WordPress функциями (wp_hash_password).
5.3.2. На сайте не хранятся данные банковских карт. Интеграция с платежными шлюзами (ЮKassa) происходит через перенаправление или iframe.
5.3.3. Реализация функционала для выполнения требований 152-ФЗ: публикация Политики конфиденциальности, запись и хранение согласий на обработку персональных данных при отправке форм.
6. КОНФИГУРАЦИЯ ПРОИЗВОДИТЕЛЬНОСТИ (PERFORMANCE)
6.1. Кэширование:
6.1.1. Серверное: Настройка кэширования на уровне NGINX (FastCGI Cache) для статических страниц.
6.1.2. На уровне приложения: Использование WP Rocket для кэширования страниц, запросов к БД и объектов.
6.1.3. Браузерное: Настройка длительных сроков кэширования (Cache-Control, Expires headers) для статических ресурсов (изображения, CSS, JS).
6.2. Оптимизация загрузки:
6.2.1. Изображения: Автоматическая генерация респонсивных изображений (атрибуты srcset, sizes). Ленивая загрузка (Lazy Load) для всех изображений ниже сгиба (below the fold).
6.2.2. Код: Объединение и минификация CSS и JavaScript файлов в продакшн-режиме. Критический CSS (Critical Path CSS) встраивается в страницы для ускорения первоначальной отрисовки.
6.2.3. Шрифты: Локальное хостирование файлов шрифтов. Использование атрибута font-display: swap; для предотвращения блокировки отрисовки текста.
6.3. Целевые показатели скорости:
Google PageSpeed Insights / Lighthouse: Оценка производительности (Performance) не ниже 90 для десктопа и 75 для мобильных устройств.
Время до первой отрисовки (First Paint): < 1.0 сек.
Время до интерактивности (Time to Interactive): < 3.5 сек.
Общий вес страницы (без медиа): < 1.5 МБ.
7. ИНТЕГРАЦИИ И ВНЕШНИЕ СЕРВИСЫ
7.1. Платежные системы: Интеграция с эквайрингом через плагин ЮKassa для WooCommerce. Поддержка оплаты банковскими картами (Visa, Mastercard, МИР), Apple Pay, Google Pay, а также выдачи счета для юридических лиц.
7.2. Службы доставки: Интеграция с API сервисов СДЭК и Boxberry для расчета стоимости и сроков доставки на этапе оформления заказа, а также для печати транспортных накладных из админки.
7.3. Аналитика и метрики: Установка и настройка Google Analytics 4 (GA4) и Яндекс.Метрики с e-commerce tracking для отслеживания конверсий по товарам и заказам.
7.4. Резервное копирование: Автоматическая отправка бекапов на удаленный S3-совместимый стораж (конфигурация через плагин UpdraftPlus).
7.5. Мониторинг: Настройка базового мониторинга uptime (доступности) сайта через внешний сервис (например, UptimeRobot).
