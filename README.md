### Технологический стек
*   **Серверная платформа:** CMS WordPress версии 6.4 и выше. Разработка кастомной темы с нуля без использования готовых конструкторов.
*   **Язык программирования (сервер):** PHP версии 8.2 и выше. Использование строгой типизации и современных возможностей языка.
*   **Веб-сервер:** Связка NGINX + PHP-FPM для высокой производительности и эффективной обработки статического контента.
*   **Среда разработки:** Docker-контейнеризация для обеспечения идентичного окружения на всех этапах (разработка, тестирование, продакшн).
*   **Ключевые плагины:**
    *   **WooCommerce 8.0+:** Полнофункциональная система управления каталогом, корзиной, заказами и клиентами для B2C-сегмента.
    *   **Advanced Custom Fields PRO:** Создание и управление сложными метаполями для товаров, страниц и записей с гибким интерфейсом в админке.
    *   **Wordfence Security:** Комплексный брандмауэр, сканер уязвимостей и система защиты от атак (XSS, SQL-инъекции, брутфорс).
    *   **WP Rocket:** Плагин для комплексного кэширования (страниц, БД, объектов), минификации CSS/JS файлов и ленивой загрузки изображений (Lazy Load).
    *   **Rank Math SEO:** Инструмент для базовой SEO-оптимизации: редактирование мета-тегов, генерация XML-карты сайта, настройка Open Graph разметки.
*   **Клиентская часть:**
    *   **HTML5:** Семантическая, валидная разметка с использованием микроформатов Schema.org (Product, Organization, BreadcrumbList).
    *   **CSS3:** Препроцессор SCSS (Sass) для модульной структуры стилей. Применение методологии именования БЭМ.
    *   **JavaScript:** Нативный ES6+ с транспиляцией через Babel для совместимости. Использование легковесного фреймворка Alpine.js для реактивных интерфейсов (модальные окна, табы, динамические фильтры).
    *   **Сборка:** Сборщик Vite для скоростной разработки, горячей перезагрузки (HMR) и финальной оптимизации бандла.
    *   **Сторонние библиотеки:**
        *   **Swiper.js:** Для реализации адаптивных и отзывчивых слайдеров в геро-секции и галереях товаров.
        *   **Just Validate:** Для клиентской валидации всех форм на сайте с кастомными сообщениями об ошибках.
        *   **Choices.js:** Для замены нативных элементов на кастомизированные, стилизуемые выпадающие списки в фильтрах каталога.
    *   **Типографика:** Шрифты подключаются через Google Fonts API. Основные гарнитуры: Noto Serif (заголовки, акценты), Inter (основной текст, интерфейс).

### Система базы данных и хранилище
*   **Система управления базами данных (СУБД):** MySQL версии 8.0 или её форк MariaDB версии 10.5 и выше.
*   **Движок хранения:** InnoDB для поддержки транзакций, внешних ключей и повышения отказоустойчивости.
*   **Безопасность БД:**
    *   Все SQL-запросы к базе данных выполняются исключительно через подготовленные выражения (Prepared Statements) для предотвращения инъекций.
    *   Префикс таблиц БД по умолчанию (wp_) изменяется на кастомный (например, wel_).
*   **Резервное копирование:** Настраивается автоматический процесс резервного копирования.
    *   **Частота:** Ежедневно — инкрементальные копии измененных данных, еженедельно — полный дамп базы данных и файловой структуры сайта.
    *   **Хранилище:** Резервные копии шифруются и передаются на удаленное S3-совместимое объектное хранилище (например, Selectel Cloud Storage, Yandex Cloud Object Storage) с политикой хранения не менее 30 дней.
*   **Медиафайлы:**
    *   Загружаемые изображения автоматически конвертируются в современный формат WebP с созданием JPEG-фоллбэка для старых браузеров.
    *   Для статического контента (изображения, CSS, JS) предусмотрена интеграция с CDN (Content Delivery Network) для увеличения скорости загрузки в различных регионах. Исходные файлы остаются на основном сервере.

### Спецификация цветовой палитры и типографики
*   **Основная палитра (HEX-коды):**
    *   Базовый белый (фон): `#FFFFFF`
    *   Фоновый оттенок (секции): `#F9F7F4`
    *   Основной текст: `#2D2A24`
    *   Вторичный текст: `#6C6559`
    *   Акцентный Primary (зеленый): `#3A6B3F`
    *   Акцентный Secondary (терракотовый): `#A35745`
    *   Акцентный Tertiary (золотистый): `#C8A97E`
    *   Цвет успеха: `#4A8B5B`
    *   Цвет ошибки: `#C45656`
*   **Типографика:**
    *   Шрифт заголовков (H1-H4): **Noto Serif**. Вес: от 400 (Regular) до 700 (Bold).
    *   Шрифт основного текста и интерфейса: **Inter**. Вес: 300 (Light) для второстепенного текста, 400 (Regular) для основного, 500 (Medium) для кнопок и навигации, 600 (SemiBold) для акцентов.
    *   Базовая линия: `font-size: 16px` для `<body>`, `line-height: 1.6`.
    *   Масштабирование: Использование относительных единиц (rem, em) для обеспечения доступности и адаптивности.
    *   Иерархия заголовков: Четко определенные размеры и отступы (margin) для каждого уровня заголовка (H1: 2.5rem, H2: 2rem, H3: 1.75rem, H4: 1.5rem).

### Архитектура административной панели (WordPress Backend)
*   **Кастомизация интерфейса:**
    *   Замена стандартного логотипа WordPress на логотип «Восточный Лист» на экране входа и в админ-панели.
    *   Упрощение главного дашборда: удаление ненужных виджетов по умолчанию, добавление кастомных блоков со статистикой по заказам и B2B-заявкам.
*   **Система ролей и прав:**
    *   **Администратор (Administrator):** Полный доступ ко всем функциям сайта и настройкам.
    *   **Редактор товаров (Shop Manager):** Управление каталогом (товары, категории, теги), заказами WooCommerce, отзывами. Запрет на доступ к настройкам плагинов, темы и пользователям.
    *   **Автор контента (Author/Editor):** Создание и публикация записей в блоге, управление собственными медиафайлами. Запрет на доступ к WooCommerce и настройкам.
*   **Структура кастомных полей (ACF) для товара:**
    *   **Группа полей "Основное":** Цена (price: Number), Артикул (sku: Text), Флаг "В наличии" (in_stock: True/False), Вес упаковки (weight: Number).
    *   **Группа полей "Галерея":** Поле типа "Галерея" (gallery: Gallery) с лимитом 10 изображений.
    *   **Группа полей "Происхождение":** Селект "Провинция" (province: Select), текстовое поле "Уезд" (county: Text), селект "Сезон сбора" (harvest_season: Select), числовое поле "Год" (year: Number).
    *   **Группа полей "Характеристики":** Повторяемое поле (specs: Repeater) с вложенными полями "Название" (name: Text) и "Значение" (value: Text).
    *   **Группа полей "Заваривание":** Числовые поля "Температура воды (°C)" (temp: Number), "Время настаивания (сек)" (steep_time: Number), "Количество на порцию (г)" (amount: Number).
*   **Управление заявками:**
    *   Создание кастомного типа записи "B2B-заявки" с полями, соответствующими форме на сайте (Название компании, Контактное лицо, Email, Телефон, Комментарий).
    *   Добавление кастомных статусов для заявок: "Новая", "В обработке", "Отклонена", "Успешно". Вывод всех заявок в едином списке в админке с возможностью сортировки, фильтрации и экспорта в CSV.

### Требования к безопасности
*   **Защита на уровне приложения (WordPress):**
    *   Ограничение попыток входа: Блокировка IP-адреса после 5 неудачных попыток входа в админку на 30 минут (реализуется через Wordfence).
    *   Скрытие информации: Отключение генерации и вывода версий WordPress и PHP в HTML-коде и HTTP-заголовках.
    *   Защита служебных файлов: Настройка правил в `.htaccess`/`nginx.conf` для запрета прямого доступа к файлам `wp-config.php`, `error_log` и директориям `wp-includes/`, `wp-content/plugins/`.
    *   Обновления: Обязательное обновление ядра WordPress, темы и всех плагинов до актуальных стабильных версий в течение 7 дней после их релиза.
*   **Защита на уровне сервера и сети:**
    *   **HTTPS:** Принудительное перенаправление всех HTTP-запросов на HTTPS. Настройка современных протоколов шифрования (TLS 1.3).
    *   **Заголовки безопасности:** Настройка HTTP-заголовков: `Strict-Transport-Security (HSTS)`, `X-Content-Type-Options: nosniff`, `X-Frame-Options: SAMEORIGIN`, базовая `Content-Security-Policy (CSP)`.
    *   **Защита от DDoS:** Использование облачного DNS-сервиса с защитой (например, Cloudflare) для скрытия реального IP-адреса сервера и фильтрации трафика.
*   **Защита данных:**
    *   Пароли пользователей хранятся только в виде хэшей, сгенерированных встроенными в WordPress функциями (`wp_hash_password`).
    *   На сайте не хранятся данные банковских карт. Интеграция с платежными шлюзами (ЮKassa) происходит через перенаправление или iframe.
    *   Реализация функционала для выполнения требований 152-ФЗ: публикация Политики конфиденциальности, запись и хранение согласий на обработку персональных данных при отправке форм.

### Конфигурация производительности (Performance)
*   **Кэширование:**
    *   **Серверное:** Настройка кэширования на уровне NGINX (FastCGI Cache) для статических страниц.
    *   **На уровне приложения:** Использование WP Rocket для кэширования страниц, запросов к БД и объектов.
    *   **Браузерное:** Настройка длительных сроков кэширования (`Cache-Control`, `Expires` headers) для статических ресурсов (изображения, CSS, JS).
*   **Оптимизация загрузки:**
    *   **Изображения:** Автоматическая генерация респонсивных изображений (атрибуты `srcset`, `sizes`). Ленивая загрузка (Lazy Load) для всех изображений ниже сгиба (below the fold).
    *   **Код:** Объединение и минификация CSS и JavaScript файлов в продакшн-режиме. Критический CSS (Critical Path CSS) встраивается в `<head>` страниц для ускорения первоначальной отрисовки.
    *   **Шрифты:** Локальное хостирование файлов шрифтов. Использование атрибута `font-display: swap;` для предотвращения блокировки отрисовки текста.
*   **Целевые показатели скорости:**
    *   **Google PageSpeed Insights / Lighthouse:** Оценка производительности (Performance) не ниже 90 для десктопа и 75 для мобильных устройств.
    *   **Время до первой отрисовки (First Paint):** < 1.0 сек.
    *   **Время до интерактивности (Time to Interactive):** < 3.5 сек.
    *   **Общий вес страницы (без медиа):** < 1.5 МБ.

### Интеграции и внешние сервисы
*   **Платежные системы:** Интеграция с эквайрингом через плагин ЮKassa для WooCommerce. Поддержка оплаты банковскими картами (Visa, Mastercard, МИР), Apple Pay, Google Pay, а также выдачи счета для юридических лиц.
*   **Службы доставки:** Интеграция с API сервисов СДЭК и Boxberry для расчета стоимости и сроков доставки на этапе оформления заказа, а также для печати транспортных накладных из админки.
*   **Аналитика и метрики:** Установка и настройка Google Analytics 4 (GA4) и Яндекс.Метрики с e-commerce tracking для отслеживания конверсий по товарам и заказам.
*   **Резервное копирование:** Автоматическая отправка бекапов на удаленный S3-совместимый стораж (конфигурация через плагин UpdraftPlus).
*   **Мониторинг:** Настройка базового мониторинга uptime (доступности) сайта через внешний сервис (например, UptimeRobot).
